import { Meta, Title,  Subtitle, Description, Controls, Primary, Stories, Source } from '@storybook/addon-docs/blocks';
import * as HeadStories from './index.stories';


<Meta of={HeadStories} name="コード"/>
<Title />
<Subtitle of={HeadStories} />
<Description of={HeadStories} />
<Stories />

### JavaScript（jQuery）
<Source code={`
$(function () {
  $('.js_accordion').each(function () {
    const $details = $(this);
    const $trigger = $details.find('summary');
    const $panel = $trigger.next();
    let isOpen = $details.prop('open');
    let isAnimating = false;

    // 初期化
    $trigger.attr('role', 'button');
    $panel
      .attr('aria-hidden', String(!isOpen))
      .css({
        overflow: 'hidden',
        height: isOpen ? 'auto' : 0
      });
    $trigger.attr('aria-expanded', String(isOpen));

    // 開閉トグル関数
    const toggleAccordion = () => {
      if (isAnimating) return;

      isOpen = !isOpen;
      $details.prop('open', true);
      $trigger.attr('aria-expanded', String(isOpen));
      $panel.attr('aria-hidden', String(!isOpen));

      isAnimating = true;

      if (isOpen) {
        $panel.css('height', 'auto');
        const height = $panel.prop('scrollHeight') + 'px';
        $panel.css('height', '0px');

        requestAnimationFrame(() => {
          $panel
            .css({ transition: 'height 300ms ease-in-out', height: height })
            .one('transitionend', function () {
              $panel.css({ height: 'auto', transition: '' });
              isAnimating = false;
            });
        });
      } else {
        const height = $panel.prop('scrollHeight') + 'px';
        $panel.css('height', height);

        requestAnimationFrame(() => {
          $panel
            .css({ transition: 'height 300ms ease-in-out', height: '0px' })
            .one('transitionend', function () {
              $details.prop('open', false);
              $panel.css({ transition: '' });
              isAnimating = false;
            });
        });
      }
    };

    // クリックイベント
    $trigger.on('click', function (e) {
      e.preventDefault(); // デフォルトの open/close 動作を止める
      toggleAccordion();
    });

    // キーボード操作（Enter / Space）
    $trigger.on('keydown', function (e) {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        toggleAccordion();
      }
    });
  });
});
`}
language="jsx"
dark
/>

### CSS

必須部分のみ抜き出したものとなります。色味などは適宜設定ください

<Source code={`
.accordion_item {
    overflow: hidden;
}
.accordion_header {
    cursor: pointer;
    list-style: none;
    transition: all 0.3s ease-out;
}
.accordion_header::-webkit-details-marker {
    display: none;
}
.accordion_header::after {
    content: '';
    width: 1.6rem;
    height: 1.6rem;
    transition: transform 0.3s ease-out;
}
.accordion_item[open] .accordion_header::after {
    transform: rotate(180deg);
}
.accordion_content {
    overflow: clip;
    transition: height 0.3s ease;
    will-change: height;
}
`}
language="css"
dark
/>
